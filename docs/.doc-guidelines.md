# 文档编写规范

## 架构设计文档规范

### 1. 文档结构原则

**DO ✅：**

- 使用清晰的树形结构展示架构层次
- 用表格总结核心设计原则
- 用简洁的列表说明职责和特点
- 提供实现清单作为行动指南

**DON'T ❌：**

- 不要在架构设计文档中包含大量代码示例
- 不要重复解释相同的概念
- 不要让文档过于冗长（建议控制在 500 行以内）

### 2. 分离关注点

架构设计文档应聚焦于：

- **What**（是什么）- 架构组件和层次
- **Why**（为什么）- 设计原则和理由
- **How**（怎么做）- 用表格/列表概述，不要详细代码

代码实现细节应放在：

- `实现指南` 目录：具体的代码示例和模式
- `API 文档` 目录：接口定义和使用方法
- `代码注释` 中：实际实现的说明

### 3. 架构文档模板

```markdown
# [架构名称]

> 参考架构、设计日期、版本

## 1. 架构概览

[树形结构图展示各层次]

## 2. 核心设计原则

### 2.1 设计原则表格

| 原则 | 说明 | 参考来源 |
|-----|------|---------|
| ... | ... | ... |

### 2.2 实现清单

- [ ] 待实现项 1
- [ ] 待实现项 2

## 3. 文档元数据

**版本**：...
**最后更新**：...
**参考架构**：...
```

### 4. 更新频率

- 架构重大调整时更新
- 每季度 review 一次
- 避免频繁修改细节

### 5. 代码示例规范

如果必须包含代码示例：

- 控制在 10 行以内
- 只展示核心接口，不展示实现
- 用伪代码或接口定义替代完整实现

**示例：**

```java
// ✅ Good - 只展示接口
public interface VariablePool {
    Variable get(List<String> selector);
    void add(List<String> selector, Object value);
}

// ❌ Bad - 包含完整实现
public class VariablePoolImpl implements VariablePool {
    private Map<String, Map<String, Variable>> variables = new HashMap<>();
    
    @Override
    public Variable get(List<String> selector) {
        if (selector.size() < 2) return null;
        String nodeId = selector.get(0);
        String varName = selector.get(1);
        // ... 50 lines of implementation
    }
}
```

### 6. 文档审查清单

在提交架构文档前检查：

- [ ] 是否有超过 20 行的代码块？→ 考虑移到实现指南
- [ ] 是否有重复的概念说明？→ 合并或引用
- [ ] 文档是否超过 500 行？→ 考虑拆分
- [ ] 表格和列表是否清晰？→ 优化格式
- [ ] 是否有明确的实现清单？→ 添加 checklist

---

**本规范适用于：**

- 架构设计文档
- DDD 分层设计
- 系统设计文档
- 技术方案文档
